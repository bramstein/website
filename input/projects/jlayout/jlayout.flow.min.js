/*
 * jLayout Flow Layout - JavaScript Layout Algorithms v0.1
 *
 * Licensed under the new BSD License.
 * Copyright 2008-2009, Bram Stein
 * All rights reserved.
 */
(function(){jLayout=typeof jLayout==="undefined"?{}:jLayout;jLayout.flow=function(a){var d={},b={};d.hgap=a.hgap||5;d.vgap=a.vgap||5;d.items=a.items||[];d.alignment=(a.alignment&&(a.alignment==="center"||a.alignment==="right"||a.alignment==="left")&&a.alignment)||"left";b.items=function(){var f=[];Array.prototype.push.apply(f,d.items);return f};b.layout=function(f){var g=f.bounds(),h=f.insets(),k=0,l=d.items.length,o,n=[],m={width:0,height:0},j={x:h.left+d.hgap,y:h.top+d.vgap};g.width-=h.left+h.right+d.hgap*2;g.height-=h.top+h.bottom+d.vgap*2;for(;k<l;k+=1){if(d.items[k].isVisible()){o=d.items[k].preferredSize();if((m.width+o.width+d.hgap)>g.width){e(n,j,m,g);n=[];j.y+=m.height;j.x=h.left+d.hgap;m.width=0;m.height=0}m.height=Math.max(m.height,o.height+d.vgap);m.width+=o.width+d.hgap;n.push(d.items[k])}}e(n,j,m,g);return f};function e(m,l,j,k){var g={x:l.x,y:l.y},h=0,f=m.length;switch(d.alignment){case"center":g.x+=(d.hgap+k.width-j.width)/2;break;case"right":g.x+=d.hgap+k.width-j.width;break}for(;h<f;h+=1){g.y=l.y;m[h].bounds(g);m[h].doLayout();g.x+=m[h].bounds().width+d.hgap}}function c(f){return function(k){var m=0,n=0,g=0,l,j=false,h=k.insets();for(;m<d.items.length;m+=1){if(d.items[m].isVisible()){l=d.items[m][f+"Size"]();g=Math.max(g,l.height);n+=Math.max(n,l.width);if(j){j=false}else{n+=d.hgap}}}return{width:n+h.left+h.right+d.hgap*2,height:g+h.top+h.bottom+d.vgap*2}}}b.preferred=c("preferred");b.minimum=c("minimum");b.maximum=c("maximum");return b}})();